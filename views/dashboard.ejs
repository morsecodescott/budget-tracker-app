<!-- views/dashboard.ejs -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <!-- Header Template-->
    <%- include('header'); -%>

    <div class="container">
        <h2>Welcome to your Dashboard</h2>
        <!-- Add your dashboard components here -->
        <div class="budget-info">
            <h3>Your Budget Information</h3>
            <%- include('partials/budgetItemsTable') %>
        </div>
        <div class="account-details">
            <h3>Your Account Details</h3>
            <!-- Display account details here -->
        </div>
<div class="budget-add">
    <%- include('partials/flashMessages') %>

    <%- include('partials/addBudgetItemForm') %>

</div>

    </div>

    <script>
        document.querySelectorAll('.budget-item-delete').forEach(button => {
            button.addEventListener('click', function(e) {
                const itemId = this.getAttribute('data-id');
                
                if(confirm('Are you sure?')) {
                    fetch(`/budget/delete/${itemId}`, {
                        method: 'DELETE',
                    })
                    .then(res => window.location.reload()) // Reload the page to reflect changes
                    .catch(err => console.error('Error:', err));
                }
            });
        });
        </script>
</body>
</html>
