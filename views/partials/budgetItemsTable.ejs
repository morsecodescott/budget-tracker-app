<!-- views/budgetItemsTable.ejs -->

<% if (budgetItems && budgetItems.length > 0) { %>
    <table class="budget-items-table">
        <thead class="budget-items-thead">
            <tr class="budget-items-header-row">
                <th>Type</th>
                <th>Amount</th>
                <th>Frequency</th>
                <th>Description</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody class="budget-items-tbody">
            <% budgetItems.forEach(function(item) { %>
                <tr class="budget-items-row">
                    <td><%= item.type %></td>
                    <td>$<%= item.amount.toFixed(2) %></td>
                    <td><%= item.frequency %></td>
                    <td><%= item.description %></td>
                    <td class="budget-items-actions">
                        <!-- Example actions -->
                        <!--<a href="/budget/edit/<%= item._id %>" class="budget-item-edit">Edit</a> |-->
                        <button onclick="openEditModal('<%= item._id %>', '<%= item.type %>', '<%= item.amount %>', '<%= item.frequency %>', '<%= item.description %>')" class="budget-item-edit">Edit</button>
                        <button class="budget-item-delete" data-id="<%= item._id %>">Delete</button>
                    </td>
                </tr>
            <% }); %>
        </tbody>
    </table>
<% } else { %>
    <p class="no-budget-items">No budget items found.</p>
<% } %>

<!-- Edit Budget Item Modal -->
<div id="editBudgetModal" class="modal" style="display:none;">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Edit Budget Item</h5>
          <button type="button" class="close" onclick="closeEditModal()">Ã—</button>
        </div>
        <div class="modal-body">
          <form id="editBudgetForm">
            <div class="form-group">
              <label for="editType">Type:</label>
              <select id="editType" name="type" required>
                <option value="income">Income</option>
                <option value="expense">Expense</option>
              </select>
            </div>
            <div class="form-group">
              <label for="editAmount">Amount:</label>
              <input type="number" id="editAmount" name="amount" step="0.01" required>
            </div>
            <div class="form-group">
              <label for="editFrequency">Frequency:</label>
              <select id="editFrequency" name="frequency" required>
                <option value="weekly">Weekly</option>
                <option value="biweekly">Biweekly</option>
                <option value="monthly">Monthly</option>
                <option value="one-time">One-time</option>
              </select>
            </div>
            <div class="form-group">
              <label for="editDescription">Description:</label>
              <input type="text" id="editDescription" name="description" required>
            </div>
            <input type="hidden" id="editItemId" name="itemId">
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" onclick="saveChanges()">Save changes</button>
          <button type="button" class="btn btn-secondary" onclick="closeEditModal()">Close</button>
        </div>
      </div>
    </div>
  </div>
  
    